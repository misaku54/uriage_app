## サイト概要
小売店向けの売上分析業務アプリケーションです。
毎日の売上を登録でき、一覧で確認できます。
登録しておいた売上データから、選択した期間の売上合計額を集計し
次に仕入れる商品を予測できるアプリを目指しました。
* ホーム画面
![screencapture-lily-sales-2023-10-11-22_55_01](https://github.com/misaku54/uriage_app/assets/123493228/95b0a91e-a9c4-42f6-98c1-30b6878332de)
* 集計画面（年別集計）
![screencapture-localhost-users-1-yearly-search-2023-10-11-23_11_12](https://github.com/misaku54/uriage_app/assets/123493228/75907f33-db1b-41de-a447-276b231e8c33)

## 制作背景
実家が小売業をしており、少しでも業務を効率化し業績に貢献したいという思いから制作を決意しました。
いただいた要望やヒアリングしたことをベースに開発しました。
* 要望
  * 商品の仕入れをする時、どんなメーカーのどんな商品をいくらぐらいで何個仕入れたら良いか
    事前に予測できるサービスが欲しい。
  * 店員の年齢層的にパソコンをほとんど扱ったことのない
    世代のため、操作が簡単にできて、おおまかに分析できるものがほしい。
* ヒアリングしたこと
  * 現在の仕入れはどのように予測しているのか。
    * その日の売上金額、メーカー、商品分類、天候、人手状況などが記載された記録ノートがあり、
      それをもとに予測している。
  * 売り上げはどのように把握しているのか。
    * 溜まったレシートを税理士に渡すことで、売り上げ合計額のグラフを作成してくれるため、それを見て把握している。
      ただし、その情報は、月の最終日にしかわからないので、日毎の売り上げ情報をノートで管理し、店側で随時確認できるようにしている。
## 使用技術
* バックエンド
  * Ruby 3.2.1
  * Ruby on Rails 7.0.4.2
  * MySql5.7
* フロントエンド
  * Bootstrap5
  * JavaScript
* テスト
  * rspec(model request system)
* インフラ
  * Docker/Docker-compose
  * AWS（ECR ECS Fargate ROUTE53 ACM ELB）
  * Github Actions  

## インフラ構成図
![aws (1)](https://github.com/misaku54/uriage_app/assets/123493228/2347a9c4-cbce-4857-ae78-f149526bfe7c)
## ER図
![ER drawio (1)](https://github.com/misaku54/uriage_app/assets/123493228/3665dedc-7364-4008-a488-739106d6f175)
## 機能一覧
* ログイン機能（クッキー保存、フレンドリーフォワーディング）
* ユーザー管理機能(管理者限定)（CRUD）
* メーカー管理機能（CRUD）
* 商品分類管理機能（CRUD）
* 売上管理機能（CRUD）
  * プラグインslimselectによる検索ができるセレクトボックス
* 集計機能
  売上管理に登録されたデータより、年別、月別、日別で売上合計額の集計する
  * メーカーごとの売上合計額をランキング形式で表示
  * 商品分類ごとの売上合計額をランキング形式で表示
  * メーカー、商品分類の組み合わせごとの売上合計額ランキング形式で表示
  * 前年比や販売個数も合わせて表示
* 定期処理実行機能
  * 3時間ごとに天気APIから当日の天気情報をDBに保存
* その他機能
  * カレンダー機能
  * ページネーション機能(kaminari＋hotwire)
  * 検索機能(ransack)
  * CSV出力機能
  * リアルタイム売上表示機能
* javascriptで実装した機能
  * 当日の天気情報を天気APIより1時間おきに取得して表示
  * リアルタイムバリデーション
  * 時計機能
  * ツールチップ
  * アコーディオンサイドバー
  * ハンバーガーメニュー
  * タブメニュー

## こだわった点
 * 300件以上のテストコード
 * 早期リターンを意識したコーディング

## 反省点や時間の都合で諦めた部分
 * 集計用のコントローラー(aggregate)がfatになっており、アクションがdry原則に反しているため、リファクリタングの余地がある。
 * 売上データモデル（sale）が単一責任化できていない。
 * ルーティングの余計なネストをしている「/users/:use_id/maker/:id」などは、ネストせずに「/maker/:id」で良かったのではないかと思った。
 * railsのバージョン選定。ポートフォリオ作成に至るまでに勉強してきた教材はrails5を扱うのがほとんどだったので、rails5を検討するべきだった。rails7のデフォルトだとjs周りの仕様がこれまでとは大きく異なっており、仕様を把握するのに時間を取られた。
　　* 一括削除機能の実装
 * DB設計見直し

## 今後取り組みたいこと
* RubyとJavaSciptを極め、できることを増やしたい。
* 様々な書籍を読み、設計やコーディング力をつけたい。
* React RailsのSPAアプリ作成
* AWSで本格的な環境構築ができるようになりたい。そのために、AWSの資格の取得。
* 応用情報の取得
